<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sustainable Action Alerts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
        }
        .header {
            background-color: #007bff;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .main-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            padding: 20px;
        }
        .thresholds-section, .alerts-section {
            flex: 1;
            min-width: 300px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }
        .thresholds-section h2, .alerts-section h2 {
            color: #007bff;
            margin-bottom: 20px;
        }
        .alert-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        .alert-card h4 {
            color: #dc3545;
        }
        .recommendation {
            color: #007bff;
        }
        .footer {
            text-align: center;
            padding: 10px;
            background-color: #f1f1f1;
            margin-top: 20px;
        }
        .chart-container {
            margin-bottom: 20px;
        }
        .chart {
            width: 100%;
            height: 400px;
        }
    </style>
</head>
<body>

<div class="header">
    <h1>Sustainable Action Alerts</h1>
    <p>Proactively monitor real-time operational data and take action to improve sustainability performance.</p>
    <nav>
        <a href="/">Home</a>
        <a href="/sustainability_report">Sustainability Report</a>
        <a href="/sustainability_alerts">Sustainability Action Alerts</a>
    </nav>
</div>

<div class="main-container">
    <!-- Thresholds Section -->
    <div class="thresholds-section">
        <h2>Set and Adjust Thresholds</h2>

        <div class="chart-container">
            <h5>Operational Metrics Over Time</h5>
            <canvas id="combinedChart" class="chart"></canvas>
        </div>

        <form class="threshold-form mt-4">
            <div class="mb-3">
                <label for="energy-threshold" class="form-label">Energy Consumption Threshold (kWh):</label>
                <input type="number" class="form-control" id="energy-threshold" value="96" min="50" max="200">
            </div>
            <div class="mb-3">
                <label for="emissions-threshold" class="form-label">Carbon Emissions Threshold (metric tons CO<sub>2</sub>e):</label>
                <input type="number" class="form-control" id="emissions-threshold" value="18" min="10" max="50">
            </div>
            <div class="mb-3">
                <label for="water-threshold" class="form-label">Water Wastage Threshold (%):</label>
                <input type="number" class="form-control" id="water-threshold" value="12" min="5" max="25">
            </div>
            <div class="mb-3">
                <label for="supply-chain-threshold" class="form-label">Supply Chain Delay Threshold (%):</label>
                <input type="number" class="form-control" id="supply-chain-threshold" value="5" min="0" max="20">
            </div>
            <button type="submit" class="btn btn-primary">Update Thresholds</button>
        </form>
    </div>

    <!-- Alerts Section -->
    <div class="alerts-section">
        <h2>Current Alerts</h2>
        <!-- Alert 1 -->
        <div class="alert-card">
            <h4>Alert: High Energy Consumption Detected</h4>
            <p><strong>Current Level:</strong> 125% of the predefined threshold (Energy usage: 120 kWh, Threshold: 96 kWh)</p>
            <p><strong>Possible Root Cause:</strong> Inefficient machinery usage or equipment malfunction.</p>
            <p class="recommendation"><strong>Recommended Action:</strong> Optimize machinery scheduling and inspect the system for leaks or malfunctioning parts in Zone B.</p>
        </div>
        <!-- Alert 2 -->
        <div class="alert-card">
            <h4>Alert: High Carbon Emissions</h4>
            <p><strong>Current Emissions:</strong> 22 metric tons CO<sub>2</sub>e (Threshold: 18 metric tons CO<sub>2</sub>e)</p>
            <p><strong>Possible Root Cause:</strong> Outdated exhaust systems or inefficient combustion processes.</p>
            <p class="recommendation"><strong>Recommended Action:</strong> Perform maintenance on exhaust systems and switch to cleaner fuel sources.</p>
        </div>
        <!-- Alert 3 -->
        <div class="alert-card">
            <h4>Alert: Inefficient Water Usage</h4>
            <p><strong>Water Wastage:</strong> 15% of total consumption (Daily use: 50,000 liters, Wastage: 7,500 liters)</p>
            <p><strong>Possible Root Cause:</strong> Leaks or outdated recycling systems.</p>
            <p class="recommendation"><strong>Recommended Action:</strong> Inspect pipelines for leaks and upgrade the water recycling system.</p>
        </div>
        <!-- Alert 4 -->
        <div class="alert-card">
            <h4>Alert: Supply Chain Delays</h4>
            <p><strong>Delay Detected:</strong> 10% increase in lead time (Expected: 5 days, Actual: 5.5 days)</p>
            <p><strong>Possible Root Cause:</strong> Transport inefficiencies or supplier capacity constraints.</p>
            <p class="recommendation"><strong>Recommended Action:</strong> Communicate with suppliers to identify bottlenecks and consider alternative transport routes.</p>
        </div>
    </div>
</div>

<div class="footer">
    <p>For more information, contact us at <a href="mailto:support@sme-sustainability.com">support@sme-sustainability.com</a></p>
</div>

<script>
    // Sample Data for Combined Chart
    const combinedData = {
        labels: ['Q1', 'Q2', 'Q3', 'Q4'],
        datasets: [
            {
                label: 'Energy Consumption (kWh)',
                data: [80, 90, 96, 120],
                borderColor: '#007bff',
                backgroundColor: 'rgba(0, 123, 255, 0.1)',
                borderWidth: 2,
                tension: 0.4
            },
            {
                label: 'Carbon Emissions (metric tons CO2e)',
                data: [16, 17, 18, 22],
                borderColor: '#dc3545',
                backgroundColor: 'rgba(220, 53, 69, 0.1)',
                borderWidth: 2,
                tension: 0.4
            },
            {
                label: 'Water Wastage (%)',
                data: [10, 11, 12, 15],
                borderColor: '#28a745',
                backgroundColor: 'rgba(40, 167, 69, 0.1)',
                borderWidth: 2,
                tension: 0.4
            },
            {
                label: 'Supply Chain Delay (%)',
                data: [3, 4, 5, 10],
                borderColor: '#ffc107',
                backgroundColor: 'rgba(255, 193, 7, 0.1)',
                borderWidth: 2,
                tension: 0.4
            }
        ]
    };

    // Create Combined Chart
    function createCombinedChart(ctx) {
        new Chart(ctx, {
            type: 'line',
            data: combinedData,
            options: {
                responsive: true,
                plugins: {
                    legend: { display: true },
                    title: { display: true, text: 'Operational Metrics Over Time' }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });
    }

    window.onload = function () {
        createCombinedChart(document.getElementById('combinedChart'));
    };
</script>

</body>
</html>
